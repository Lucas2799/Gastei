<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Gastei.UI.Views.NovaDividaPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:Gastei.UI.ViewModels"
    xmlns:entities="clr-namespace:Gastei.Core.Entities;assembly=Gastei.Core"
    xmlns:enums="clr-namespace:Gastei.Core.Enums;assembly=Gastei.Core"
    x:DataType="viewmodels:NovaDividaViewModel"
    BackgroundColor="#121212"
    Title="Nova DÃ­vida">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- HEADER -->
            <Frame Padding="20" CornerRadius="20" HasShadow="True">
                <Frame.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#6a11cb" Offset="0.0" />
                        <GradientStop Color="#2575fc" Offset="1.0" />
                    </LinearGradientBrush>
                </Frame.Background>

                <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                    <Label Text="Nova DÃ­vida" FontSize="26" FontAttributes="Bold" TextColor="White"/>
                    <Label Text="Preencha os dados abaixo"
                           FontSize="14" TextColor="#DDDDDD"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>
            </Frame>


            <!-- ðŸ”¹ INFORMAÃ‡Ã•ES BÃSICAS -->
            <Label Text="InformaÃ§Ãµes BÃ¡sicas" FontSize="18" FontAttributes="Bold" TextColor="White"/>

            <Frame BackgroundColor="#1E1E1E" CornerRadius="12" Padding="15">
                <VerticalStackLayout Spacing="15">

                    <!-- DescriÃ§Ã£o -->
                    <Label Text="DescriÃ§Ã£o" TextColor="#AAA" />
                    <Border StrokeThickness="0" BackgroundColor="#292929" StrokeShape="RoundRectangle 10" Padding="10">
                        <Entry Text="{Binding DividaSelecionada.Descricao}"
                               Placeholder="Ex: CartÃ£o de crÃ©dito"
                               TextColor="White"
                               BackgroundColor="Transparent"/>
                    </Border>

                    <!-- Valor -->
                    <Label Text="Valor (R$)" TextColor="#AAA" />
                    <Border StrokeThickness="0" BackgroundColor="#292929" StrokeShape="RoundRectangle 10" Padding="10">
                        <Entry Text="{Binding DividaSelecionada.Valor}"
                               Keyboard="Numeric"
                               Placeholder="0,00"
                               TextColor="White"
                               BackgroundColor="Transparent"/>
                    </Border>

                    <!-- Valor prÃ³ximo mÃªs -->
                    <Label Text="Valor Estimado PrÃ³ximo MÃªs (opcional)" TextColor="#AAA" />
                    <Border StrokeThickness="0" BackgroundColor="#292929" StrokeShape="RoundRectangle 10" Padding="10">
                        <Entry Text="{Binding DividaSelecionada.ValorEstimadoProximoMes}"
                               Keyboard="Numeric"
                               Placeholder="0,00"
                               TextColor="White"
                               BackgroundColor="Transparent"/>
                    </Border>

                </VerticalStackLayout>
            </Frame>



            <!-- ðŸ”¹ DETALHES -->
            <Label Text="Detalhes" FontSize="18" FontAttributes="Bold" TextColor="White"/>

            <Frame BackgroundColor="#1E1E1E" CornerRadius="12" Padding="15">
                <VerticalStackLayout Spacing="15">

                    <!-- Tipo -->
                    <Label Text="Tipo" TextColor="#AAA" />
                    <Picker ItemsSource="{Binding TiposDisponiveis}"
                            SelectedItem="{Binding DividaSelecionada.Tipo}"
                            Title="Selecione o tipo"
                            TextColor="White"
                            TitleColor="#888"/>

                    <!-- Categoria -->
                    <Label Text="Categoria" TextColor="#AAA" />
                    <Picker ItemsSource="{Binding CategoriasDisponiveis}"
                            SelectedItem="{Binding DividaSelecionada.Categoria}"
                            Title="Selecione uma categoria"
                            TextColor="White"
                            TitleColor="#888"/>

                    <!-- Subcategoria -->
                    <Label Text="Subcategoria" TextColor="#AAA" />
                    <Picker ItemsSource="{Binding SubcategoriasDisponiveis}"
                            SelectedItem="{Binding DividaSelecionada.Subcategoria}"
                            Title="Selecione uma subcategoria"
                            TextColor="White"
                            TitleColor="#888"/>

                    <!-- Ativa -->
                    <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                        <Label Text="Ativa" TextColor="#AAA"/>
                        <Switch IsToggled="{Binding DividaSelecionada.Ativa}" />
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>



            <!-- ðŸ”¹ REFERÃŠNCIA MENSAL -->
            <Label Text="ReferÃªncia do MÃªs/Ano"
                   FontSize="18"
                   FontAttributes="Bold"
                   TextColor="White"/>

            <Frame BackgroundColor="#1E1E1E" CornerRadius="12" Padding="15">
                <VerticalStackLayout Spacing="12">

                    <Label Text="Selecione o mÃªs e ano desta dÃ­vida."
                           FontSize="12" TextColor="#888"/>

                    <HorizontalStackLayout Spacing="20">

                        <!-- MÃªs -->
                        <VerticalStackLayout>
                            <Label Text="MÃªs" TextColor="#AAA"/>
                            <Border BackgroundColor="#292929" Padding="10" StrokeShape="RoundRectangle 10">
                                <Entry Text="{Binding DividaSelecionada.ReferenciaMes}"
                                       WidthRequest="80"
                                       Keyboard="Numeric"
                                       BackgroundColor="Transparent"
                                       TextColor="White"/>
                            </Border>
                        </VerticalStackLayout>

                        <!-- Ano -->
                        <VerticalStackLayout>
                            <Label Text="Ano" TextColor="#AAA"/>
                            <Border BackgroundColor="#292929" Padding="10" StrokeShape="RoundRectangle 10">
                                <Entry Text="{Binding DividaSelecionada.ReferenciaAno}"
                                       WidthRequest="100"
                                       Keyboard="Numeric"
                                       BackgroundColor="Transparent"
                                       TextColor="White"/>
                            </Border>
                        </VerticalStackLayout>

                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>



            <!-- BOTÃƒO -->
            <Button Text="ðŸ’¾ Salvar DÃ­vida"
                    Command="{Binding SalvarCommand}"
                    HeightRequest="55"
                    BackgroundColor="#6a11cb"
                    TextColor="White"
                    CornerRadius="12"
                    FontAttributes="Bold"
                    FontSize="18"/>

            <ActivityIndicator IsVisible="{Binding IsBusy}"
                               IsRunning="{Binding IsBusy}"
                               HorizontalOptions="Center" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
